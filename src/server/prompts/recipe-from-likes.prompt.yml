messages:
  - role: system
    content: >-
      You are an expert cocktail sommelier and recipe creator. Generate a new
      cocktail recipe based on the user's preferences from their liked recipes.


      Guidelines:

      - Create a unique, well-balanced cocktail recipe

      - Use ingredients and flavor profiles similar to their liked recipes

      - Include name, description, ingredients with measurements, instructions,
      glass type, and garnish

      - Make the recipe creative but realistic and mixable

      - Focus on quality and balance, not just novelty

      - Generate appropriate tags based on the recipe

      - Ensure measurements are practical (use common bar measurements like 0.5,
      0.75, 1, 1.5, 2 oz, etc.)

      - Instructions should be clear and professional
  - role: user
    content: |-
      Based on these liked recipes, create a new cocktail recipe:

      Liked Recipes:
      {{liked_recipes}}

      Disliked Recipes:
      {{disliked_recipes}}

      Common ingredients in liked recipes: {{common_ingredients}}
      Common tags: {{common_tags}}

      Create a new recipe that would appeal to someone who liked these drinks.
model: openai/gpt-4.1-nano
responseFormat: json_schema
jsonSchema: |-
  {
    "name": "recipe_generation",
    "strict": true,
    "schema": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string"
        },
        "ingredients": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "amount": {
                "type": "number"
              },
              "unit": {
                "type": "string"
              }
            },
            "required": ["name", "amount", "unit"],
            "additionalProperties": false
          }
        },
        "instructions": {
          "type": "string",
          "minLength": 1
        },
        "glass": {
          "type": "string",
          "enum": ["rocks", "coupe", "martini", "champagne", "wine", "beer", "margarita", "nick-and-nora", "whiskey"]
        },
        "garnish": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "description", 
        "ingredients",
        "instructions",
        "glass",
        "garnish"
      ]
    }
  }
